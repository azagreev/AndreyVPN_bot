# Research 04-01: Profile Delivery Assets

## Objective
Identify the best approach for generating QR codes and managing file delivery in the Telegram bot.

## QR Code Generation
- **Requirement**: AmneziaWG configs can be quite large due to obfuscation parameters. The QR code must be readable.
- **Candidate 1: `segno`**: 
  - Pros: Pure Python, no external dependencies like PIL (unless specialized formats are needed), supports micro-QR.
  - Cons: None significant for this use case.
- **Candidate 2: `qrcode`**:
  - Pros: Industry standard.
  - Cons: Requires `Pillow` for PNG generation, which is a heavy dependency.

**Decision**: Use `segno`. It's lightweight and easy to use.

## File Delivery (aiogram)
- **Mechanism**:
  - `.conf` file: `types.BufferedInputFile` to avoid writing to disk.
  - QR image: `types.BufferedInputFile` (generated by `segno` as bytes).

## User Flow
1. **User**: Press "Request VPN" button.
2. **System**: Send request to Admin.
3. **Admin**: Press "Approve" button.
4. **System**: `VPNService.create_profile()` -> Generate QR -> Send QR + .conf to User.

## Dependencies to add:
- `segno`
