---
phase: 01-foundation-data-layer
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [requirements.txt, .env.example, .env, bot/core/config.py]
autonomous: true
requirements: [DATA-01]
must_haves:
  truths:
    - "Проект содержит requirements.txt со всеми необходимыми зависимостями (aiogram, aiosqlite, pydantic-settings)."
    - "Файл .env.example содержит шаблоны для BOT_TOKEN и других настроек."
    - "Файл .env создан на основе .env.example и содержит корректные значения."
    - "Конфигурация бота загружается корректно через Pydantic Settings."
  artifacts:
    - path: "requirements.txt"
      provides: "Список зависимостей проекта"
    - path: "bot/core/config.py"
      provides: "Класс настроек Config для загрузки .env"
    - path: "bot/core/__init__.py"
      provides: "Инициализация модуля ядра"
  key_links:
    - from: "bot/core/config.py"
      to: ".env"
      via: "pydantic-settings (SettingsConfigDict)"
      pattern: "env_file *= *['\"].env['\"]"
---

<objective>
Настройка базового окружения проекта, зависимостей и системы управления конфигурацией. Создание структуры папок бота.

Цель: Обеспечить прочный фундамент для разработки бота с использованием асинхронного подхода и типизированных настроек.
Результат: Готовый к работе скелет проекта с установленными зависимостями и загрузкой конфигурации.
</objective>

<execution_context>
@/home/azagreev/.gemini/get-shit-done/workflows/execute-plan.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/research/PHASE_01_RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Настройка зависимостей и переменных окружения</name>
  <files>requirements.txt, .env.example, .env</files>
  <action>
    1. Создать requirements.txt с версиями библиотек из исследования:
       - aiogram>=3.17.0
       - aiosqlite>=0.20.0
       - pydantic-settings>=2.7.0
       - python-dotenv>=1.0.0
       - loguru>=0.7.0
    2. Создать .env.example с переменными:
       - BOT_TOKEN=ваш_токен_бота
       - ADMIN_ID=ваш_телеграм_id
       - DB_PATH=bot_data.db
    3. Скопировать .env.example в .env для локальной разработки.
    4. Примечание: Комментарии в файлах и логи должны быть на русском языке.
  </action>
  <verify>
    <automated>grep -E "aiogram|aiosqlite|pydantic-settings" requirements.txt && ls .env</automated>
    <manual>Убедиться, что .env.example содержит BOT_TOKEN и DB_PATH, и .env существует.</manual>
    <sampling_rate>after_task</sampling_rate>
  </verify>
  <done>Зависимости определены, файл примера .env создан и скопирован в .env.</done>
</task>

<task type="auto">
  <name>Создание структуры папок и системы конфигурации</name>
  <files>bot/core/config.py, bot/core/__init__.py, bot/db/__init__.py, bot/handlers/__init__.py, bot/middlewares/__init__.py</files>
  <action>
    1. Создать структуру директорий: bot/core, bot/db, bot/handlers, bot/middlewares.
    2. В каждой директории создать пустой __init__.py.
    3. Создать bot/core/config.py с использованием pydantic_settings.Settings.
    4. Описать класс Settings с полями:
       - bot_token: str
       - admin_id: int
       - db_path: str = "bot_data.db"
    5. Настроить загрузку из файла .env (env_file=".env").
    6. Все комментарии в коде должны быть на русском языке.
  </action>
  <verify>
    <automated>python3 -c "from bot.core.config import Settings; print('Config system ready')"</automated>
    <manual>Проверить наличие всех папок и файлов __init__.py.</manual>
    <sampling_rate>after_task</sampling_rate>
  </verify>
  <done>Структура проекта создана, конфигурация загружается программно из .env.</done>
</task>

</tasks>

<success_criteria>
1. Файл requirements.txt содержит все необходимые библиотеки.
2. Конфигурация корректно считывается из переменных окружения в .env.
3. Все модули бота инициализированы (наличие __init__.py).
</success_criteria>

<output>
После завершения создать .planning/phases/01-foundation-data-layer/01-01-SUMMARY.md
</output>
